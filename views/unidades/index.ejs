<%- include('../layout', { body: `
  <div class="bg-white p-6 rounded shadow">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold">Unidades</h2>
      <a href="/unidades/new" class="bg-blue-600 text-white px-4 py-2 rounded">Nueva Unidad</a>
    </div>

    ${dbDown ? `<div class="mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-300 text-yellow-800">Base de datos no disponible — mostrando 0 registros.</div>` : ''}

    <div class="overflow-x-auto">
      <table class="min-w-full bg-white">
        <thead>
          <tr>
            <th class="px-4 py-2">Código</th>
            <th class="px-4 py-2">Placa</th>
            <th class="px-4 py-2">Capacidad</th>
            <th class="px-4 py-2">Acciones</th>
          </tr>
        </thead>
        <tbody>
          ${unidades.length === 0 ? `
            <tr><td class="px-4 py-6 text-center" colspan="4">No hay unidades registradas.</td></tr>
          ` : unidades.map(u => `
            <tr>
              <td class="border px-4 py-2">${u.CODIGO || u.codigo}</td>
              <td class="border px-4 py-2">${u.PLACA || u.placa}</td>
              <td class="border px-4 py-2">${u.CAPACIDAD || u.capacidad}</td>
              <td class="border px-4 py-2">
                <a href="/unidades/${u.CODIGO || u.codigo}/edit" class="text-sm text-indigo-600 mr-2">Editar</a>
                <form method="POST" action="/unidades/${u.CODIGO || u.codigo}?_method=DELETE" style="display:inline">
                  <button class="text-sm text-red-600">Eliminar</button>
                </form>
              </td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    </div>
  </div>
` }) %>
` }) %>
